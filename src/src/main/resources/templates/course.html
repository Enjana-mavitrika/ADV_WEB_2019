<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Courses</title>

    <!-- INCLUDE SHARED METAS -->
    <meta th:replace="metas-header :: meta" />
    <!-- INCLUDE SHARED LINKS  -->
    <link th:replace="links-header :: link" />

    <link href="css/class.css" rel="stylesheet" type="text/css" />
    <link href="css/course.css" rel="stylesheet" type="text/css" />

</head>

<body>

    <!-- INCLUDE HEADER -->
    <header th:replace="header :: header"></header>

    <section class="w-container">

        <div class="control">
            <button id="request-button" class="w-button" type="button">Demander un cours</button>
            <button id="share-button" class="w-button" type="button">Publier un cours</button>
        </div>

        <div class="card topcard">[[ ${subject.name} ]]</div>
        
        
        <article th:each="publication : ${subject.publications}">
            <div class="card" onclick="redirect()">[[ ${publication.course.dateCourse} ]] : [[ ${publication.course.name} ]]</div>
            <div class="divemoji">
                <button class="emoji" id="" onclick="">&#128525;</button>
                <span>[[ ${publication.numberLike} ]]</span>
                <button class="emoji" style='font-size:30px;'>&#129326;</button>
                <span>[[ ${publication.numberDislike} ]]</span>
            </div>
        </article>


        <div id="request-modal" class="modal">
            <div class="modal-content">
                <span id="request-close" class="close">&times;</span>
                <form method="POST" th:action="@{/addRequest}" th:object="${request}">
                    <div class="modal-body">
                        <span>Choisissez la date du cours demandé :</span><br>
                        <input th:field="*{subjectId}" type="hidden">
                        <input th:field="*{dateCourse}" type="date"><br>
                        <button type="submit" class="w-button">Valider la demande</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="share-modal" class="modal">
            <div class="modal-content">
                <span id="share-close" class="close">&times;</span>
                <form method="POST" action="/publish-success">
                    <div class="modal-body">
                        <span>Si vous publierez votre cours à la réponse d'une demande :</span><br>
                        <select id="select-date" onchange="check()">
                            <option value="0">--Choisissez la date du cours que vous publierez--</option>
                            <option th:each="request : ${subject.requests}" th:value="${request.dateCourse}">[[ ${request.dateCourse} ]]</option>
                        </select><br>
                        <span>Si vous publierez votre cours spontanément :</span><br>
                        <input id="input-date" class="input-date" type="date"><br>
                        <span>Sélectionnez les fichiers du cours :</span>
                        <input type="file" name="img" multiple><br>
                        <button type="submit" class="w-button">Ajouter les fichiers</button><br>
                        <span>Si vous avez un commentaire à propos de votre publication (optionnel) :</span><br>
                        <textarea cols="50" rows="10"></textarea>
                    </div>
                </form>
            </div>
        </div>

    </section>

    <!-- INCLUDE FOOTER -->
    <footer th:replace="footer :: footer"></footer>

    <script src="lib/webfont.js"></script>
    <script type="text/javascript">WebFont.load({
            google: {
                families: ["Montserrat:400,700", "Varela Round:400", "Varela:400"]
            }
        });
    </script>
    <script src="lib/modernizr-2.7.1.js" type="text/javascript"></script>
    <script src="js/course.js" type="text/javascript"></script>

</body>

</html>